 Template.create_new_signature.onRendered(function() {
        $('.js-signature').jqSignature();
 
})

Template.create_new_signature.events({
    "click .clear_signature": function(e, tpl) {
        tpl.$('.js-signature').jqSignature('clearCanvas');
    }
})


Template.create_new_signature.helpers({
    option: function() {
        return {
            string: function() {
                return "DONE"
            },
            save: function() {
                var binaryString=$('.js-signature').jqSignature('getDataURL');
				if(binaryString==="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAq4AAADICAYAAAApzWNoAAALL0lEQVR4Xu3WQQ0AAAwCseHf9HRc0ikgZQ92jgABAgQIECBAgEBAYIGMIhIgQIAAAQIECBA4w9UTECBAgAABAgQIJAQM10RNQhIgQIAAAQIECBiufoAAAQIECBAgQCAhYLgmahKSAAECBAgQIEDAcPUDBAgQIECAAAECCQHDNVGTkAQIECBAgAABAoarHyBAgAABAgQIEEgIGK6JmoQkQIAAAQIECBAwXP0AAQIECBAgQIBAQsBwTdQkJAECBAgQIECAgOHqBwgQIECAAAECBBIChmuiJiEJECBAgAABAgQMVz9AgAABAgQIECCQEDBcEzUJSYAAAQIECBAgYLj6AQIECBAgQIAAgYSA4ZqoSUgCBAgQIECAAAHD1Q8QIECAAAECBAgkBAzXRE1CEiBAgAABAgQIGK5+gAABAgQIECBAICFguCZqEpIAAQIECBAgQMBw9QMECBAgQIAAAQIJAcM1UZOQBAgQIECAAAEChqsfIECAAAECBAgQSAgYromahCRAgAABAgQIEDBc/QABAgQIECBAgEBCwHBN1CQkAQIECBAgQICA4eoHCBAgQIAAAQIEEgKGa6ImIQkQIECAAAECBAxXP0CAAAECBAgQIJAQMFwTNQlJgAABAgQIECBguPoBAgQIECBAgACBhIDhmqhJSAIECBAgQIAAAcPVDxAgQIAAAQIECCQEDNdETUISIECAAAECBAgYrn6AAAECBAgQIEAgIWC4JmoSkgABAgQIECBAwHD1AwQIECBAgAABAgkBwzVRk5AECBAgQIAAAQKGqx8gQIAAAQIECBBICBiuiZqEJECAAAECBAgQMFz9AAECBAgQIECAQELAcE3UJCQBAgQIECBAgIDh6gcIECBAgAABAgQSAoZroiYhCRAgQIAAAQIEDFc/QIAAAQIECBAgkBAwXBM1CUmAAAECBAgQIGC4+gECBAgQIECAAIGEgOGaqElIAgQIECBAgAABw9UPECBAgAABAgQIJAQM10RNQhIgQIAAAQIECBiufoAAAQIECBAgQCAhYLgmahKSAAECBAgQIEDAcPUDBAgQIECAAAECCQHDNVGTkAQIECBAgAABAoarHyBAgAABAgQIEEgIGK6JmoQkQIAAAQIECBAwXP0AAQIECBAgQIBAQsBwTdQkJAECBAgQIECAgOHqBwgQIECAAAECBBIChmuiJiEJECBAgAABAgQMVz9AgAABAgQIECCQEDBcEzUJSYAAAQIECBAgYLj6AQIECBAgQIAAgYSA4ZqoSUgCBAgQIECAAAHD1Q8QIECAAAECBAgkBAzXRE1CEiBAgAABAgQIGK5+gAABAgQIECBAICFguCZqEpIAAQIECBAgQMBw9QMECBAgQIAAAQIJAcM1UZOQBAgQIECAAAEChqsfIECAAAECBAgQSAgYromahCRAgAABAgQIEDBc/QABAgQIECBAgEBCwHBN1CQkAQIECBAgQICA4eoHCBAgQIAAAQIEEgKGa6ImIQkQIECAAAECBAxXP0CAAAECBAgQIJAQMFwTNQlJgAABAgQIECBguPoBAgQIECBAgACBhIDhmqhJSAIECBAgQIAAAcPVDxAgQIAAAQIECCQEDNdETUISIECAAAECBAgYrn6AAAECBAgQIEAgIWC4JmoSkgABAgQIECBAwHD1AwQIECBAgAABAgkBwzVRk5AECBAgQIAAAQKGqx8gQIAAAQIECBBICBiuiZqEJECAAAECBAgQMFz9AAECBAgQIECAQELAcE3UJCQBAgQIECBAgIDh6gcIECBAgAABAgQSAoZroiYhCRAgQIAAAQIEDFc/QIAAAQIECBAgkBAwXBM1CUmAAAECBAgQIGC4+gECBAgQIECAAIGEgOGaqElIAgQIECBAgAABw9UPECBAgAABAgQIJAQM10RNQhIgQIAAAQIECBiufoAAAQIECBAgQCAhYLgmahKSAAECBAgQIEDAcPUDBAgQIECAAAECCQHDNVGTkAQIECBAgAABAoarHyBAgAABAgQIEEgIGK6JmoQkQIAAAQIECBAwXP0AAQIECBAgQIBAQsBwTdQkJAECBAgQIECAgOHqBwgQIECAAAECBBIChmuiJiEJECBAgAABAgQMVz9AgAABAgQIECCQEDBcEzUJSYAAAQIECBAgYLj6AQIECBAgQIAAgYSA4ZqoSUgCBAgQIECAAAHD1Q8QIECAAAECBAgkBAzXRE1CEiBAgAABAgQIGK5+gAABAgQIECBAICFguCZqEpIAAQIECBAgQMBw9QMECBAgQIAAAQIJAcM1UZOQBAgQIECAAAEChqsfIECAAAECBAgQSAgYromahCRAgAABAgQIEDBc/QABAgQIECBAgEBCwHBN1CQkAQIECBAgQICA4eoHCBAgQIAAAQIEEgKGa6ImIQkQIECAAAECBAxXP0CAAAECBAgQIJAQMFwTNQlJgAABAgQIECBguPoBAgQIECBAgACBhIDhmqhJSAIECBAgQIAAAcPVDxAgQIAAAQIECCQEDNdETUISIECAAAECBAgYrn6AAAECBAgQIEAgIWC4JmoSkgABAgQIECBAwHD1AwQIECBAgAABAgkBwzVRk5AECBAgQIAAAQKGqx8gQIAAAQIECBBICBiuiZqEJECAAAECBAgQMFz9AAECBAgQIECAQELAcE3UJCQBAgQIECBAgIDh6gcIECBAgAABAgQSAoZroiYhCRAgQIAAAQIEDFc/QIAAAQIECBAgkBAwXBM1CUmAAAECBAgQIGC4+gECBAgQIECAAIGEgOGaqElIAgQIECBAgAABw9UPECBAgAABAgQIJAQM10RNQhIgQIAAAQIECBiufoAAAQIECBAgQCAhYLgmahKSAAECBAgQIEDAcPUDBAgQIECAAAECCQHDNVGTkAQIECBAgAABAoarHyBAgAABAgQIEEgIGK6JmoQkQIAAAQIECBAwXP0AAQIECBAgQIBAQsBwTdQkJAECBAgQIECAgOHqBwgQIECAAAECBBIChmuiJiEJECBAgAABAgQMVz9AgAABAgQIECCQEDBcEzUJSYAAAQIECBAgYLj6AQIECBAgQIAAgYSA4ZqoSUgCBAgQIECAAAHD1Q8QIECAAAECBAgkBAzXRE1CEiBAgAABAgQIGK5+gAABAgQIECBAICFguCZqEpIAAQIECBAgQMBw9QMECBAgQIAAAQIJAcM1UZOQBAgQIECAAAEChqsfIECAAAECBAgQSAgYromahCRAgAABAgQIEDBc/QABAgQIECBAgEBCwHBN1CQkAQIECBAgQICA4eoHCBAgQIAAAQIEEgKGa6ImIQkQIECAAAECBAxXP0CAAAECBAgQIJAQMFwTNQlJgAABAgQIECBguPoBAgQIECBAgACBhIDhmqhJSAIECBAgQIAAAcPVDxAgQIAAAQIECCQEDNdETUISIECAAAECBAgYrn6AAAECBAgQIEAgIWC4JmoSkgABAgQIECBAwHD1AwQIECBAgAABAgkBwzVRk5AECBAgQIAAAQKGqx8gQIAAAQIECBBICBiuiZqEJECAAAECBAgQMFz9AAECBAgQIECAQELAcE3UJCQBAgQIECBAgIDh6gcIECBAgAABAgQSAoZroiYhCRAgQIAAAQIEDFc/QIAAAQIECBAgkBAwXBM1CUmAAAECBAgQIGC4+gECBAgQIECAAIGEgOGaqElIAgQIECBAgAABw9UPECBAgAABAgQIJAQM10RNQhIgQIAAAQIECBiufoAAAQIECBAgQCAhYLgmahKSAAECBAgQIEDAcPUDBAgQIECAAAECCQHDNVGTkAQIECBAgAABAg93ugDJ+Fro6AAAAABJRU5ErkJggg==")
				{
					show_toast("Please Enter Signature");
					return
				}
binaryString=binaryString.split("base64,")[1];
 Meteor.call("createNewSignature",{binaryString:binaryString},function(err,res){
			  $('.js-signature').jqSignature('clearCanvas');  
			  })            
			
			 history.go(-1)
         
            }
        }
    }
});